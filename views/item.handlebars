
    <main>
        <h1>{{shop.name}}'s {{item.name}}: </h1>
        <ol>
                <li>
                    <ul>
                        <li><p>Description: {{item.description}}</p></li>
                        <li><p>Price: {{item.price}}</p></li>
                        <li><p>Calories: {{item.calories}}</p></li>
                        <li><p>Average Rating: {{item.averageRating}}</p></li>
                        <li><p>Tags: {{item.tags}}</p></li>
                        <li><p>Allergens: {{item.allergens}}</p></li>
                    </ul>
                </li>
        </ol>
        {{#if Admin}}
<details>
  <summary>Submit an edit for {{item.name}}</summary>
    <form id="itemForm" name="itemForm" action="/shop/{{shop._id}}/item/{{item._id}}/edit" method="POST"> 
        <div>
            <label for="name">
                Item Name:
            <input id="name" name="name" type="text" autocomplete="off" value={{item.name}}>
        </label>
        </div>
        <div>
            <label for="price">
            Price:
            <input id="price" name="price" type="number" step="0.01" min="0" autocomplete="off" value={{item.price}}>
            </label>
        </div>
        <div>
            <label for="calories">
            Calories:
            <input id="calories" name="calories" type="number" step="1" min="0" autocomplete="off" value={{item.calories}}>
            </label>
        </div>
        <div>
            <label for="description">
                <textarea id="description" name="description" placeholder="Write a description..." value={{item.description}}></textarea>
            </label>
        </div>
        <div>
            <label>Add tags</label>
            <dl id="tagList">
                <dt>Flavors</dt>
                <dd>
                    <input id="taro" name="taro" type="checkbox">
                    <label for="taro">Taro</label>
                </dd>
                <dd>
                    <input id="matcha" name="matcha" type="checkbox">
                    <label for="matcha">Matcha</label>
                </dd>
                <dd>
                    <input id="honeydew" name="honeydew" type="checkbox">
                    <label for="honeydew">Honeydew</label>
                </dd>
                <dd>
                    <input id="mango" name="mango" type="checkbox">
                    <label for="mango">Mango</label>
                </dd>
                <dd>
                    <input id="lychee" name="lychee" type="checkbox">
                    <label for="lychee">Lychee</label>
                </dd>
                <dd>
                    <input id="strawberry" name="strawberry" type="checkbox">
                    <label for="strawberry">Strawberry</label>
                </dd>
                <dt>Toppings</dt>
                <dd>
                    <input id="tapioca" name="tapioca" type="checkbox">
                    <label for="tapioca">Tapioca Pearls</label>
                </dd>
                <dd>
                    <input id="jelly" name="jelly" type="checkbox">
                    <label for="jelly">Jelly</label>
                </dd>
                <dd>
                    <input id="milk_foam" name="milk_foam" type="checkbox">
                    <label for="milk_foam">Milk Foam</label>
                </dd>
                <dt>Temperature</dt>
                <dd>
                    <input id="iced" name="iced" type="checkbox">
                    <label for="iced">Iced</label>
                </dd>
                <dd>
                    <input id="hot" name="hot" type="checkbox">
                    <label for="hot">Hot</label>
                </dd>
                <dt>Type</dt>
                <dd>
                    <input id="milk" name="milk_tea" type="checkbox">
                    <label>Milk Tea</label>
                </dd>
                <dd>
                    <input id="fruit_tea" name="fruit_tea" type="checkbox">
                    <label for="fruit_tea">Fruit Tea</label>
                </dd>
                <dd>
                    <input id="coffee" name="coffee" type="checkbox">
                    <label for="coffee">Coffee</label>
                </dd>
                <dd>
                    <input id="slush" name="slush" type="checkbox">
                    <label for="slush">Slush</label>
                </dd>
                <dd>
                    <input id="vegan" name="vegan" type="checkbox">
                    <label for="vegan">Vegan</label>
                </dd>
            </dl>
            <h4>Common Allergens</h4>
            <dl id="allergenList">
                <dt></dt>
                <dd>
                    <input id="gluten" name="gluten" type="checkbox">
                    <label for="gluten">Gluten</label>
                </dd>
                <dd>
                    <input id="dairy" name="dairy" type="checkbox">
                    <label for="dairy">Dairy</label>
                </dd>
                <dd>
                    <input id="peanuts" name="peanuts" type="checkbox">
                    <label for="peanuts">Peanuts</label>
                </dd>
                <dd>
                    <input id="treenuts" name="treenuts" type="checkbox">
                    <label for="treenuts">Tree Nuts</label>
                </dd>
                <dd>
                    <input id="sesame" name="sesame" type="checkbox">
                    <label for="sesame">Sesame</label>
                </dd>
                <dd>
                    <input id="mustard" name="mustard" type="checkbox">
                    <label for="mustard">Mustard</label>
                </dd>
                <dd>
                    <input id="soy" name="soy" type="checkbox">
                    <label for="soy">Soy</label>
                </dd>
                <dd>
                    <input id="eggs" name="eggs" type="checkbox">
                    <label for="eggs">Eggs</label>
                </dd>
                <dd>
                    <input id="fish" name="fish" type="checkbox">
                    <label for="fish">Fish</label>
                </dd>
                <dd>
                    <input id="shellfish" name="shellfish" type="checkbox">
                    <label for="shellfish">Shellfish</label>
                </dd>
            </dl>
        </div>
        <button type="submit" name="submitButton" id="submitButton" class="save">Submit</button>
    </form>
</details>
        {{else}}
        {{#if isOwner}}
        <details>
  <summary>Submit an edit for {{item.name}}</summary>
    <form id="itemForm" name="itemForm" action="/shop/{{shop._id}}/item/{{item._id}}/edit" method="POST"> 
        <div>
            <label for="name">
                Item Name:
            <input id="name" name="name" type="text" autocomplete="off">
        </label>
        </div>
        <div>
            <label for="price">
            Price:
            <input id="price" name="price" type="number" step="0.01" min="0" autocomplete="off">
            </label>
        </div>
        <div>
            <label for="calories">
            Calories:
            <input id="calories" name="calories" type="number" step="1" min="0" autocomplete="off">
            </label>
        </div>
        <div>
            <label for="description">
                <textarea id="description" name="description" placeholder="Write a description..."></textarea>
            </label>
        </div>
        <div>
            <label>Add tags</label>
            <dl id="tagList">
                <dt>Flavors</dt>
                <dd>
                    <input id="taro" name="taro" type="checkbox">
                    <label for="taro">Taro</label>
                </dd>
                <dd>
                    <input id="matcha" name="matcha" type="checkbox">
                    <label for="matcha">Matcha</label>
                </dd>
                <dd>
                    <input id="honeydew" name="honeydew" type="checkbox">
                    <label for="honeydew">Honeydew</label>
                </dd>
                <dd>
                    <input id="mango" name="mango" type="checkbox">
                    <label for="mango">Mango</label>
                </dd>
                <dd>
                    <input id="lychee" name="lychee" type="checkbox">
                    <label for="lychee">Lychee</label>
                </dd>
                <dd>
                    <input id="strawberry" name="strawberry" type="checkbox">
                    <label for="strawberry">Strawberry</label>
                </dd>
                <dt>Toppings</dt>
                <dd>
                    <input id="tapioca" name="tapioca" type="checkbox">
                    <label for="tapioca">Tapioca Pearls</label>
                </dd>
                <dd>
                    <input id="jelly" name="jelly" type="checkbox">
                    <label for="jelly">Jelly</label>
                </dd>
                <dd>
                    <input id="milk_foam" name="milk_foam" type="checkbox">
                    <label for="milk_foam">Milk Foam</label>
                </dd>
                <dt>Temperature</dt>
                <dd>
                    <input id="iced" name="iced" type="checkbox">
                    <label for="iced">Iced</label>
                </dd>
                <dd>
                    <input id="hot" name="hot" type="checkbox">
                    <label for="hot">Hot</label>
                </dd>
                <dt>Type</dt>
                <dd>
                    <input id="milk" name="milk_tea" type="checkbox">
                    <label>Milk Tea</label>
                </dd>
                <dd>
                    <input id="fruit_tea" name="fruit_tea" type="checkbox">
                    <label for="fruit_tea">Fruit Tea</label>
                </dd>
                <dd>
                    <input id="coffee" name="coffee" type="checkbox">
                    <label for="coffee">Coffee</label>
                </dd>
                <dd>
                    <input id="slush" name="slush" type="checkbox">
                    <label for="slush">Slush</label>
                </dd>
                <dd>
                    <input id="vegan" name="vegan" type="checkbox">
                    <label for="vegan">Vegan</label>
                </dd>
            </dl>
            <h4>Common Allergens</h4>
            <dl id="allergenList">
                <dt></dt>
                <dd>
                    <input id="gluten" name="gluten" type="checkbox">
                    <label for="gluten">Gluten</label>
                </dd>
                <dd>
                    <input id="dairy" name="dairy" type="checkbox">
                    <label for="dairy">Dairy</label>
                </dd>
                <dd>
                    <input id="peanuts" name="peanuts" type="checkbox">
                    <label for="peanuts">Peanuts</label>
                </dd>
                <dd>
                    <input id="treenuts" name="treenuts" type="checkbox">
                    <label for="treenuts">Tree Nuts</label>
                </dd>
                <dd>
                    <input id="sesame" name="sesame" type="checkbox">
                    <label for="sesame">Sesame</label>
                </dd>
                <dd>
                    <input id="mustard" name="mustard" type="checkbox">
                    <label for="mustard">Mustard</label>
                </dd>
                <dd>
                    <input id="soy" name="soy" type="checkbox">
                    <label for="soy">Soy</label>
                </dd>
                <dd>
                    <input id="eggs" name="eggs" type="checkbox">
                    <label for="eggs">Eggs</label>
                </dd>
                <dd>
                    <input id="fish" name="fish" type="checkbox">
                    <label for="fish">Fish</label>
                </dd>
                <dd>
                    <input id="shellfish" name="shellfish" type="checkbox">
                    <label for="shellfish">Shellfish</label>
                </dd>
            </dl>
        </div>
        <button type="submit" name="submitButton" id="submitButton" class="save">Submit</button>
    </form>
</details>
        {{/if}}
        {{/if}}
        {{#if loggedIn}}
            {{#if Default}}
            <div id="container">
                <form action="/shop/{{shop._id}}/item/{{item._id}}" method="POST" id="reviewForm">
                    <label for="title">
                        Review Title:
                        <input id="title" name="title" type="text">
                    </label>
                    <br>
                    <label for="rating">
                        Rating:
                        <input type="range" value="1" min="1" max="5" name="rating" id="rating" oninput="updateOutput()">
                    </label>
                    <output id="ratingOutput">1</output>
                    <script>
                        function updateOutput() {
                            var ratingInput = document.getElementById("rating");
                            var output = document.getElementById("ratingOutput");
                            output.textContent = ratingInput.value;
                        }
                    </script>
                    <br>
                    <label for="review">
                        <textarea id="review" name="review" placeholder="Write a Review..."></textarea>
                    </label>
                    <br>
                    <button type="submit" id="submitButton" name="submitButton" class="save">Create Review</button>
                </form>
            </div>
            {{/if}}
        {{/if}}
        <button onclick="toggleContent('toggledReviews')">Display Reviews</button>
        <div id="toggledReviews" style="display: none;">
        <div id="container3">
            <label>Search Reviews:</label>
            <input class="search-bar" type="text" name="search" id="search" placeholder="Service...">
            <br>
            <button type="button" onclick="searchReviews()">
                <img class="search-button" alt="search-button" src="/public/img/search-icon.png">
            </button>
        </div>
        <script>
            function searchReviews() {
                var searchValue = document.getElementById('search').value;
                var itemValue = "{{item._id}}"
                var url = '/shop/{{shop._id}}/reviewSearch/' + encodeURIComponent(searchValue) + '?item=' + encodeURIComponent(itemValue);
                location.href = url;
            }
        </script>
            <select id="reviewSort" name="reviewSort" onchange="reviewSort(this.value)">
                <option value='oldest'>By Oldest</option>
                <option value='newest'>By Newest</option>
                <option value='highest'>By Most Positive</option>
                <option value='lowest'>By Most Negative</option>
            </select>
            <ul id="oldest">
                {{#each reviews}}
                <li>
                    <h3><a href="/review/{{this._id}}">{{this.title}}</a></h3>
                    <p>Rating: {{this.rating}}/5</p>
                    <p>Posted by: {{this.user}}</p>
                    <p>Posted on: {{this.reviewDate}}</p>
                </li>
                {{/each}}
            </ul>
            <ul id="newest" hidden>
                {{#each newestReviews}}
                <li>
                    <h3><a href="/review/{{this._id}}">{{this.title}}</a></h3>
                    <p>Rating: {{this.rating}}/5</p>
                    <p>Posted by: {{this.user}}</p>
                    <p>Posted on: {{this.reviewDate}}</p>
                </li>
                {{/each}}
            </ul>
            <ul id="highest" hidden>
                {{#each highestReviews}}
                <li>
                    <h3><a href="/review/{{this._id}}">{{this.title}}</a></h3>
                    <p>Rating: {{this.rating}}/5</p>
                    <p>Posted by: {{this.user}}</p>
                    <p>Posted on: {{this.reviewDate}}</p>
                </li>
                {{/each}}
            </ul>
            <ul id="lowest" hidden>
                {{#each lowestReviews}}
                <li>
                    <h3><a href="/review/{{this._id}}">{{this.title}}</a></h3>
                    <p>Rating: {{this.rating}}/5</p>
                    <p>Posted by: {{this.user}}</p>
                    <p>Posted on: {{this.reviewDate}}</p>
                </li>
                {{/each}}
            </ul>
        </div>
        {{#if isOwner}}
        <form action="/shop/{{shop._id}}/item/{{item._id}}/delete" method="POST">
            <button type="submit" class="delete">DELETE ITEM</button>
        </form>
        {{else}}
        {{#if Admin}}
        <form action="/shop/{{shop._id}}/item/{{item._id}}/delete" method="POST">
            <button type="submit" class="delete">DELETE ITEM</button>
        </form>
        {{/if}}
        {{/if}}
        <footer>
            <a href="/shop/{{shop._id}}" class="static-link">Go back to {{shop.name}}</a>
        </footer>

    </main>
